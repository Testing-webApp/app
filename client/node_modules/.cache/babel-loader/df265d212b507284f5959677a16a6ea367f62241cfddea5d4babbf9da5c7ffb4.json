{"ast":null,"code":"import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const{Link,Navigate}=require(\"react-router-dom\");const{useState}=require('react');const baseUrl=require('../baseUrl.js');const axios=require('axios');function LoginPage(){const[redirect,setRedirect]=useState(false);const[login_info,setlogin_info]=useState({Email:'',Password:''});const handleChange=event=>{const{name,value}=event.target;setlogin_info(prevInfo=>({...prevInfo,[name]:value}));};const handleSubmit=async event=>{console.log(login_info);event.preventDefault();const result=await login();console.log(result);alert('Login successful');setRedirect(true);};async function login(){try{const response_landlord=await axios.post(\"\".concat(baseUrl,\"/login/Landlord\"),login_info,{withCredentials:true});if(response_landlord.data==='No email found'){const response_spec=await axios.post(\"\".concat(baseUrl,\"/login/Spectator\"),login_info,{withCredentials:true});if(response_spec.data==='No email found'){const response_per=await axios.post(\"\".concat(baseUrl,\"/login/Performer\"),login_info,{withCredentials:true});if(response_per.data==='No email found'){}else{console.log(response_per.data.token);localStorage.setItem(\"Performer-Token\",response_per.data.token);return response_per;}}else{localStorage.setItem(\"Spectator-Token\",response_spec.data.token);return response_spec;}}else{console.log(\"Response: \",response_landlord);localStorage.setItem(\"Landlord-Token\",response_landlord.data.token);return response_landlord;}}catch(error){console.log(error);alert('Login failed');}}if(redirect){return/*#__PURE__*/_jsx(Navigate,{to:'/'});}return/*#__PURE__*/_jsxs(\"div\",{className:\"LoginPage\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"Form\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"login-element\",type:\"email\",placeholder:\"your@email.com\",name:\"Email\",value:login_info.Email,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{className:\"login-element\",type:\"password\",placeholder:\"Password\",name:\"Password\",value:login_info.Password,onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{className:\"login-element\",type:\"submit\",onClick:handleSubmit,children:\"Login\"})]})]});}export default LoginPage;","map":{"version":3,"names":["Link","Navigate","require","useState","baseUrl","axios","LoginPage","redirect","setRedirect","login_info","setlogin_info","Email","Password","handleChange","event","name","value","target","prevInfo","handleSubmit","console","log","preventDefault","result","login","alert","response_landlord","post","concat","withCredentials","data","response_spec","response_per","token","localStorage","setItem","error","_jsx","to","_jsxs","className","children","type","placeholder","onChange","onClick"],"sources":["/home/nikola/Documents/NodeJS-projects/thinkering/client/src/pages/LoginPage.js"],"sourcesContent":["const { Link, Navigate } = require(\"react-router-dom\");\nconst { useState } =  require('react');\nconst baseUrl = require( '../baseUrl.js');\n\n\nconst axios = require('axios')\n\n\n\n\nfunction LoginPage() {\n\n  const [redirect, setRedirect] = useState(false);\n\n\n  const [login_info, setlogin_info] = useState({  \n    Email: '',\n    Password: '',});\n\n  const handleChange = (event)=>{\n    const { name, value } = event.target;\n    setlogin_info((prevInfo) => ({ ...prevInfo, [name]: value }));\n  }\n\n  const handleSubmit = async (event) => {\n    console.log(login_info)\n    event.preventDefault();\n    const result = await login();\n    console.log(result)\n    alert('Login successful');\n    setRedirect(true);\n  }\n\n  async function login() {\n  try {\n    const response_landlord = await axios.post(`${baseUrl}/login/Landlord`, login_info, {withCredentials: true});\n    if(response_landlord.data === 'No email found'){\n      const response_spec = await axios.post(`${baseUrl}/login/Spectator`, login_info, {withCredentials: true});\n\n      if(response_spec.data === 'No email found'){\n        const response_per = await axios.post(`${baseUrl}/login/Performer`, login_info, {withCredentials: true});\n        if(response_per.data === 'No email found'){\n    }\n    else{\n\n      console.log(response_per.data.token)\n      localStorage.setItem(\"Performer-Token\", response_per.data.token)\n      return response_per;\n    }\n  }\n  else{\n\n    localStorage.setItem(\"Spectator-Token\", response_spec.data.token)\n    return response_spec;\n\n  }\n}\n    else{\n      console.log(\"Response: \", response_landlord)\n      localStorage.setItem(\"Landlord-Token\", response_landlord.data.token)\n      return response_landlord;\n    }\n  } catch (error) {\n    console.log(error);\n    alert('Login failed');\n  }\n}\n\n  if (redirect){\n    return <Navigate to ={'/'}/>\n  }\n\n  return (\n  <div className='LoginPage'>\n\n    <h1>Login</h1>\n    \n      <form className='Form'>\n        <input className='login-element' type=\"email\" placeholder=\"your@email.com\" name='Email' value={login_info.Email} onChange={handleChange} />\n        <input className='login-element' type=\"password\" placeholder=\"Password\" name='Password' value={login_info.Password} onChange={handleChange} />\n        <button className='login-element' type=\"submit\" onClick={handleSubmit}>Login</button>\n      </form>\n        \n    \n    \n  </div>\n  );\n}\n\n\nexport default LoginPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}